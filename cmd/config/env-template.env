# Canasta .env Configuration Reference
# =====================================
# This is a REFERENCE TEMPLATE — do not edit this file directly or copy it
# over an existing .env. The real .env is generated by "canasta create" and
# should be modified with "canasta config set", which handles side effects
# (e.g., updating wikis.yaml, regenerating the Caddyfile) and restarts
# automatically. Editing .env by hand may leave the installation in an
# inconsistent state.
#
# View current settings:  canasta config get -i <id>
# Change a setting:       canasta config set -i <id> KEY VALUE
# Generate this template: canasta config generate

# ── Network ──────────────────────────────────────────────────────────────────
# Ports exposed on the host for HTTP and HTTPS traffic.
HTTP_PORT=80
HTTPS_PORT=443

# ── MediaWiki ────────────────────────────────────────────────────────────────
# NOTE: Do not set MW_SITE_SERVER or MW_SITE_FQDN here. They are derived
# automatically from config/wikis.yaml. To change the domain, edit
# wikis.yaml and run "canasta config set" to update HTTPS_PORT if needed.
#
# Secret key used by MediaWiki for session signing. Auto-generated if empty.
#MW_SECRET_KEY=

# ── Database ─────────────────────────────────────────────────────────────────
# Root MySQL/MariaDB password. Required for new installations.
MYSQL_PASSWORD=
# Per-wiki database password (auto-generated for wiki farms if empty).
#WIKI_DB_PASSWORD=
# Set to "true" to skip the bundled database container and use an external DB.
USE_EXTERNAL_DB=false

# ── PHP ──────────────────────────────────────────────────────────────────────
# Maximum upload file size accepted by PHP.
PHP_UPLOAD_MAX_FILESIZE=10M
# Maximum size of POST data accepted by PHP.
PHP_POST_MAX_SIZE=10M
# Maximum number of input variables accepted per request.
PHP_MAX_INPUT_VARS=1000

# ── Features ─────────────────────────────────────────────────────────────────
# Enable the bundled Elasticsearch service for CirrusSearch.
CANASTA_ENABLE_ELASTICSEARCH=false
# Enable the observability stack (OpenSearch, Logstash, Dashboards).
# When enabled, OS_USER, OS_PASSWORD, and OS_PASSWORD_HASH are auto-generated
# if not already set.
#CANASTA_ENABLE_OBSERVABILITY=false

# ── Observability Credentials ────────────────────────────────────────────────
# These are auto-generated when observability is enabled. Override if needed.
#OS_USER=admin
#OS_PASSWORD=
#OS_PASSWORD_HASH=

# ── Caddy / TLS ─────────────────────────────────────────────────────────────
# Set to "off" to disable automatic HTTPS (e.g., when TLS is terminated
# by an upstream reverse proxy).
#CADDY_AUTO_HTTPS=

# ── Docker Image ─────────────────────────────────────────────────────────────
# Override the default Canasta Docker image.
#CANASTA_IMAGE=ghcr.io/canastawiki/canasta:latest

# ── Backup (Restic) ─────────────────────────────────────────────────────────
# Repository URL for restic backups (local path or s3:endpoint/bucket/path).
#RESTIC_REPOSITORY=
# Password for the restic repository.
#RESTIC_PASSWORD=
# AWS credentials for S3-based backup repositories.
#AWS_ACCESS_KEY_ID=
#AWS_SECRET_ACCESS_KEY=
